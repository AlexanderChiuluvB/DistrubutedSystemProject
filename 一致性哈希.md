## 为什么需要一致性哈希

一致性哈希提供了一个平滑的扩缩容的方法,向存储结构增加一个结点的时候不需要改变hash函数,同时指影响到一部分数据的存储,适用于分布式的存储系统.

## 概念

key、node利用哈希算法放到一个代表存储空间的环上,环的大小有2^32.

根据顺时针规则,node1到node2之间的距离属于node1,如果在node1,node2之间插入node4,那么原来属于node2现在属于node4的区域中的key现在属于node4.

删除节点也是同样的.

当结点太少而造成存储不平衡的时候,可以创造虚拟结点,虚拟结点在环形空间的位置可以利用原来nodeip+后缀的形式来计算.虚拟结点到实际结点的映射均定位到原本的结点上.

### 跳转表的实现

用跳转表来搜索key所在的node.